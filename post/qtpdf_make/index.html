<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=HandheldFriendly content="True"><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=generator content="Hugo 0.74.3"><link rel=apple-touch-icon sizes=180x180 href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon-16x16.png><link rel=manifest href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/site.webmanifest><link rel=mask-icon href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/safari-pinned-tab.svg color=#8aa2d3><link rel="shortcut icon" href=https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon.ico><meta name=theme-color content="#ffffff"><title>QtPDF 的编译与试用 - REWINE NOTE</title><meta name=author content="rewine"><meta name=description content="A minimal Hugo theme with nice theme color."><meta name=keywords content="Qt"><meta property="og:title" content="QtPDF 的编译与试用"><meta name=twitter:title content="QtPDF 的编译与试用"><meta property="og:type" content="article"><meta property="og:url" content="https://wineee.github.io/post/qtpdf_make/"><meta property="og:description" content="QtPDF 是 Qt 封装的 pdfium 模块，以 GPLv3/LGPLv3 协议分发，也可以在 QT marketplace 购买可商业版本
下载源代码
git clone <https://code.qt.io/qt/qtwebengine.git>
cd qtwebengine
git checkout 5.12.8
git submodule update --init --recursive

注意：git checkout 选择自己 qt 的版本"><meta name=twitter:description content="QtPDF 是 Qt 封装的 pdfium 模块，以 GPLv3/LGPLv3 协议分发，也可以在 QT marketplace 购买可商业版本
下载源代码
git clone <https://code.qt.io/qt/qtwebengine.git>
cd qtwebengine
git checkout 5.12.8
git submodule update --init --recursive

注意：git checkout 选择自己 qt 的版本"><meta property="og:image" content="https://wineee.github.io/img/og.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wineee.github.io/img/og.png"><meta property="article:published_time" content="2021-08-23T00:00:00+00:00"><meta property="article:modified_time" content="2021-08-23T00:00:00+00:00"><style>@media(prefers-color-scheme:dark){body[data-theme=auto] img{filter:brightness(60%)}}body[data-theme=dark] img{filter:brightness(60%)}</style><link rel=stylesheet href=https://wineee.github.io/assets/css/fuji.min.css></head><body data-theme=auto data-theme-auto=false><script data-cfasync=false>var fujiThemeData=localStorage.getItem('fuji_data-theme');if(!fujiThemeData){localStorage.setItem('fuji_data-theme','auto');}else{if(fujiThemeData!=='auto'){document.body.setAttribute('data-theme',fujiThemeData==='dark'?'dark':'light');}}</script><header><div class="container-lg clearfix"><div class="col-12 header"><a class=title-main href=https://wineee.github.io>REWINE NOTE</a>
<span class=title-sub>Informatik verbindet dich und mich.</span></div></div></header><main><div class="container-lg clearfix"><div class="col-12 col-md-9 float-left content"><article><h2 class="post-item post-title"><a href=https://wineee.github.io/post/qtpdf_make/>QtPDF 的编译与试用</a></h2><div class="post-item post-meta"><span><i class="iconfont icon-today-sharp"></i>&nbsp;2021-08-23</span>
<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;484 字</span>
<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href=/tags/qt>Qt</a>&nbsp;</span></div><div class="post-content markdown-body"><p>QtPDF 是 Qt 封装的 pdfium 模块，以 <a href=https://www.gnu.org/licenses/gpl-3.0.html target=_blank>GPLv3/</a><a href=https://www.gnu.org/licenses/lgpl-3.0.html target=_blank>LGPLv3</a> 协议分发，也可以在 QT marketplace 购买可商业版本</p><h3 id=下载源代码>下载源代码</h3><pre><code class=language-bash>git clone &lt;https://code.qt.io/qt/qtwebengine.git&gt;
cd qtwebengine
git checkout 5.12.8
git submodule update --init --recursive
</code></pre><p>注意：git checkout 选择自己 qt 的版本</p><h3 id=安装构建依赖>安装构建依赖</h3><pre><code class=language-bash>sudo apt install bison build-essential gperf flex python2 libasound2-dev libcups2-dev libdrm-dev libegl1-mesa-dev libnss3-dev libpci-dev libpulse-dev libudev-dev nodejs libxtst-dev gyp ninja-build
sudo apt install libssl-dev libxcursor-dev libxcomposite-dev libxdamage-dev libxrandr-dev libfontconfig1-dev libxss-dev libsrtp2-dev libwebp-dev libjsoncpp-dev libopus-dev libminizip-dev libavutil-dev libavformat-dev libavcodec-dev libevent-dev libvpx-dev libsnappy-dev libre2-dev libprotobuf-dev protobuf-compile
</code></pre><p>如果报错 Project ERROR: Unknown module(s) in QT: qml-private， 需要安装 qtdeclarative5-dev</p><h3 id=编译>编译</h3><pre><code class=language-bash>cd ..
mkdir build 
cd build 
qmake ../qtwebengine
NINJAJOBS=-j7 make -j7 
make install
</code></pre><p>下面是 qmake 的输出信息，如果依赖安装不全可以参考一下</p><pre><code class=language-bash>Running configuration tests...
Done running configuration tests.

Configure summary:

Qt WebEngine:
  Embedded build ......................... no
  Full debug information ................. no
  Pepper Plugins ......................... yes
  Printing and PDF ....................... yes
  Proprietary Codecs ..................... no
  Spellchecker ........................... yes
  Native Spellchecker .................... no
  WebRTC ................................. yes
  Use System Ninja ....................... no
  Geolocation ............................ yes
  WebChannel support ..................... yes
  Use v8 snapshot ........................ yes
  Kerberos Authentication ................ no
  Support qpa-xcb ........................ yes
  Use ALSA ............................... yes
  Use PulseAudio ......................... yes
  Optional system libraries used:
    re2 .................................. yes
    icu .................................. no
    libwebp, libwebpmux and libwebpdemux . yes
    opus ................................. yes
    ffmpeg ............................... no
    libvpx ............................... yes
    snappy ............................... yes
    glib ................................. yes
    zlib ................................. yes
    minizip .............................. yes
    libevent ............................. yes
    jsoncpp .............................. yes
    protobuf ............................. yes
    libxml2 and libxslt .................. yes
    lcms2 ................................ yes
    png .................................. yes
    JPEG ................................. yes
    harfbuzz ............................. yes
    freetype ............................. yes
  Required system libraries:
    fontconfig ........................... yes
    dbus ................................. yes
    nss .................................. yes
    khr .................................. yes
    glibc ................................ yes
  Required system libraries for qpa-xcb:
    x11 .................................. yes
    libdrm ............................... yes
    xcomposite ........................... yes
    xcursor .............................. yes
    xi ................................... yes
    xtst ................................. yes

Qt is now configured for building. Just run 'make'.
Once everything is built, you must run 'make install'.
Qt will be installed into '/usr'.

Prior to reconfiguration, make sure you remove any leftovers from
the previous build.
</code></pre><p>编译过程需要2-3个小时，内存占用高峰大概需要16G + 5G swap</p><h3 id=使用测试>使用测试</h3><pre><code class=language-makefile>QT += core gui widgets pdf pdfwidgets
</code></pre><p>如果能正常识别，说明配置成功了，可以试试下面这个例子：</p><p><a href=https://github.com/CryFeiFei/QtPdfTest>https://github.com/CryFeiFei/QtPdfTest</a></p><p><a href=https://doc.qt.io/qt-5/qtpdf-pdfviewer-example.html target=_blank>PDF Viewer Example</a></p><p><img class=img-zoomable src=https://cdn.jsdelivr.net/gh/wineee/MarkDownPIC@master/img/2006288850634b247ab10c5c0c128982.png alt=wishimg></p><h3 id=参考资料>参考资料</h3><ul><li><a href=https://wiki.qt.io/QtPDF_Build_Instructions target=_blank>QtPDF Build Instructions</a></li><li><a href=https://www.qt.io/blog/2017/01/30/new-qtpdf-qtlabs-module target=_blank>New QtLabs PDF module</a></li><li><a href=https://wiki.qt.io/QtWebEngine/How_to_Try target=_blank>QtWebEngine/How to Try</a></li></ul></div></article><div class="license markdown-body"><blockquote><p>除特殊注明部分，本站内容采用 <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a> 进行许可。</p></blockquote></div><div class=post-comment data-comment=utterances><span class=post-comment-notloaded><i class="iconfont icon-chatbox-ellipses-sharp"></i>&nbsp;查看评论</span>
<script>function loadComment(){var commentArea=document.querySelector('.post-comment');var utterancesTheme=document.body.getAttribute('data-theme');if(utterancesTheme==='auto'){utterancesTheme=window.matchMedia('(prefers-color-scheme: dark)').matches?'photon-dark':'github-light';}else{utterancesTheme=utterancesTheme==='dark'?'photon-dark':'github-light';}
var s=document.createElement('script');s.src='https://utteranc.es/client.js';s.setAttribute('repo','wineee\/hugoblogtalks');s.setAttribute('issue-term','pathname');s.setAttribute('theme',utterancesTheme);s.setAttribute('crossorigin','anonymous');s.setAttribute('async','');document.querySelector('.post-comment').appendChild(s);document.querySelector('span.post-comment-notloaded').setAttribute('style','display: none;');}</script></div></div><aside class="col-12 col-md-3 float-left sidebar"><div class="sidebar-item sidebar-pages"><h3>页面</h3><ul><li><a href=/>Home</a></li><li><a href=/archives/>Archives</a></li><li><a href=/about/>About</a></li><li><a href=/search/>Search</a></li><li><a href=/friends/>Friends</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div class="sidebar-item sidebar-links"><h3>链接</h3><ul><li><a href=https://github.com/wineee target=_blank><span>GitHub</span></a></li><li><a href=https://twitter.com/rewineeee target=_blank><span>Twitter</span></a></li><li><a href=https://space.bilibili.com/23192485 target=_blank><span>bilibili</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><h3>标签</h3><div><span><a href=/tags/acm/>ACM</a></span>
<span><a href=/tags/bfs/>bfs</a></span>
<span><a href=/tags/c/>c</a></span>
<span><a href=/tags/c++/>c++</a></span>
<span><a href=/tags/cryptography/>cryptography</a></span>
<span><a href=/tags/emacs/>emacs</a></span>
<span><a href=/tags/go/>go</a></span>
<span><a href=/tags/goroutine/>goroutine</a></span>
<span><a href=/tags/haskell/>Haskell</a></span>
<span><a href=/tags/hugo/>hugo</a></span>
<span><a href=/tags/lab/>lab</a></span>
<span><a href=/tags/leetcode/>leetcode</a></span>
<span><a href=/tags/mfc/>mfc</a></span>
<span><a href=/tags/nixos/>nixos</a></span>
<span><a href=/tags/onlyoffice/>onlyoffice</a></span>
<span><a href=/tags/qt/>qt</a></span>
<span><a href=/tags/turing-award/>Turing Award</a></span>
<span><a href=/tags/%E5%8C%88%E7%89%99%E5%88%A9%E7%AE%97%E6%B3%95/>匈牙利算法</a></span>
<span><a href=/tags/%E5%8D%95%E7%BA%AF%E5%9E%8B/>单纯型</a></span>
<span><a href=/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/>多线程</a></span>
<span><a href=/tags/%E5%B9%B6%E5%8F%91/>并发</a></span>
<span><a href=/tags/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80/>康托展开</a></span>
<span><a href=/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/>蓝桥杯</a></span>
<span><a href=/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/>软件工程</a></span>
<span><a href=/tags/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/>软件推荐</a></span></div></div><div class="sidebar-item sidebar-toc"><h3>目录</h3><nav id=TableOfContents><ul><li><ul><li><a href=#下载源代码>下载源代码</a></li><li><a href=#安装构建依赖>安装构建依赖</a></li><li><a href=#编译>编译</a></li><li><a href=#使用测试>使用测试</a></li><li><a href=#参考资料>参考资料</a></li></ul></li></ul></nav></div></aside></div><div class=btn><div class=btn-menu id=btn-menu><i class="iconfont icon-grid-sharp"></i></div><div class=btn-toggle-mode><i class="iconfont icon-contrast-sharp"></i></div><div class=btn-scroll-top><i class="iconfont icon-chevron-up-circle-sharp"></i></div></div><aside class=sidebar-mobile style=display:none><div class=sidebar-wrapper><div class="sidebar-item sidebar-pages"><h3>页面</h3><ul><li><a href=/>Home</a></li><li><a href=/archives/>Archives</a></li><li><a href=/about/>About</a></li><li><a href=/search/>Search</a></li><li><a href=/friends/>Friends</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div class="sidebar-item sidebar-links"><h3>链接</h3><ul><li><a href=https://github.com/wineee target=_blank><span>GitHub</span></a></li><li><a href=https://twitter.com/rewineeee target=_blank><span>Twitter</span></a></li><li><a href=https://space.bilibili.com/23192485 target=_blank><span>bilibili</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><h3>标签</h3><div><span><a href=/tags/acm/>ACM</a></span>
<span><a href=/tags/bfs/>bfs</a></span>
<span><a href=/tags/c/>c</a></span>
<span><a href=/tags/c++/>c++</a></span>
<span><a href=/tags/cryptography/>cryptography</a></span>
<span><a href=/tags/emacs/>emacs</a></span>
<span><a href=/tags/go/>go</a></span>
<span><a href=/tags/goroutine/>goroutine</a></span>
<span><a href=/tags/haskell/>Haskell</a></span>
<span><a href=/tags/hugo/>hugo</a></span>
<span><a href=/tags/lab/>lab</a></span>
<span><a href=/tags/leetcode/>leetcode</a></span>
<span><a href=/tags/mfc/>mfc</a></span>
<span><a href=/tags/nixos/>nixos</a></span>
<span><a href=/tags/onlyoffice/>onlyoffice</a></span>
<span><a href=/tags/qt/>qt</a></span>
<span><a href=/tags/turing-award/>Turing Award</a></span>
<span><a href=/tags/%E5%8C%88%E7%89%99%E5%88%A9%E7%AE%97%E6%B3%95/>匈牙利算法</a></span>
<span><a href=/tags/%E5%8D%95%E7%BA%AF%E5%9E%8B/>单纯型</a></span>
<span><a href=/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/>多线程</a></span>
<span><a href=/tags/%E5%B9%B6%E5%8F%91/>并发</a></span>
<span><a href=/tags/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80/>康托展开</a></span>
<span><a href=/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/>蓝桥杯</a></span>
<span><a href=/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/>软件工程</a></span>
<span><a href=/tags/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/>软件推荐</a></span></div></div><div class="sidebar-item sidebar-toc"><h3>目录</h3><nav id=TableOfContents><ul><li><ul><li><a href=#下载源代码>下载源代码</a></li><li><a href=#安装构建依赖>安装构建依赖</a></li><li><a href=#编译>编译</a></li><li><a href=#使用测试>使用测试</a></li><li><a href=#参考资料>参考资料</a></li></ul></li></ul></nav></div></div></aside></main><footer><div class="container-lg clearfix"><div class="col-12 footer"><span>&copy; 2020-2021
<a href=https://wineee.github.io>rewine</a>
| <a href=https://github.com/wineee/wineee.github.io>Source code</a>
| 基于 <a href=https://github.com/dsrkafuu/hugo-theme-fuji/ target=_blank>Fuji-v2</a> & <a href=https://gohugo.io/ target=_blank>Hugo</a> 构建
| <a href="https://icp.gov.moe/?keyword=20211211" target=_blank>萌ICP备20211211号</a></span></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js></script><script defer src=/assets/js/fuji.min.js></script></body></html>